# ドキュメント戦略

プロジェクト全体のドキュメント管理方針を定義する。

## 目的

このドキュメントは以下を定める：

- ドキュメントの分類と配置ルール
- 対象読者の定義
- ドキュメントのライフサイクル管理
- 既存の運用ガイドとの関係

## ドキュメント分類

### プロダクトドキュメント（docs/）

プロダクトそのものについての文書。「何であるか」「どう使うか」を説明する。

| 種別 | 説明 | 例 |
|------|------|-----|
| 概念説明 | フレームワークの設計思想・アーキテクチャ | CONCEPTS.md, ARCHITECTURE.md |
| 仕様 | 機能の完全な仕様定義 | PROMPT_MODULE_SPEC.md, STRUCTURED_OUTPUTS.md |
| ガイド | 利用方法の手順書 | GETTING_STARTED.md, AI_SERVICE_GUIDE.md |
| APIリファレンス | インターフェース・型の詳細 | DRIVER_API.md |
| テスト指針 | テスト方針と品質基準 | TESTING_STRATEGY.md |

**配置ルール**: `docs/` 直下にフラットに配置する。サブディレクトリは原則使わない。

### プロセスドキュメント（prompts/）

開発プロセスについての文書。「どう作るか」「どう管理するか」を説明する。

| 種別 | 説明 | 例 |
|------|------|-----|
| 運用ガイド | ドキュメント管理・品質管理の手順 | document-code-sync.md, DOCUMENT_PROOFREADING_GUIDE.md |
| リリース手順 | バージョン管理・リリースの手順 | RELEASE_GUIDE.md |
| 設計メモ | 技術的意思決定の記録 | memos/*.md |

**配置ルール**: `prompts/` 直下に配置する。設計メモは `prompts/memos/` に配置する。

### パッケージドキュメント（packages/*/README.md）

各パッケージのエントリーポイント。パッケージの目的・基本的な使い方を簡潔に記述する。

**配置ルール**: 各パッケージのルートに `README.md` として配置する。

### プロジェクトルートドキュメント

| ファイル | 役割 |
|---------|------|
| README.md | プロジェクトの顔。概要・特徴・クイックスタート |
| AGENTS.md | AIアシスタント向けガイド（後述） |
| CHANGELOG.md | プロジェクト全体の変更履歴 |

## docs/ と prompts/ の境界

判断基準: **文書の主題がプロダクトかプロセスか**

- 「PromptModuleの仕様は何か」→ プロダクト → **docs/**
- 「ドキュメントとコードをどう同期するか」→ プロセス → **prompts/**
- 「リリースはどう行うか」→ プロセス → **prompts/**
- 「テストはどう設計するか」→ プロダクト品質基準 → **docs/**

迷った場合は、**その文書がなくてもプロダクトとして成立するか**を考える。成立するならプロセスドキュメント（prompts/）に配置する。

## AGENTS.md の役割と方針

### 現状の課題

AGENTS.mdは詳細な仕様情報を多数含んでおり、docs/の各文書と内容が重複している。

### あるべき姿

AGENTS.mdは**AIアシスタントが作業を開始するためのブートストラップ文書**とする。

含めるべき内容：
- プロジェクト概要（簡潔に）
- 主要ファイルの場所
- 開発コマンド一覧
- パッケージ構成の概要
- docs/への参照リンク

含めるべきでない内容：
- 型定義の詳細（→ docs/PROMPT_MODULE_SPEC.md へ）
- ドライバーの詳細仕様（→ docs/DRIVER_API.md へ）
- テスト構成の詳細（→ docs/TESTING_STRATEGY.md へ）

### 目安

AGENTS.mdは**200行以内**を目標とする。詳細が必要な場合はdocs/の該当文書を参照させる。

## 設計メモ（prompts/memos/）の管理

### 目的

設計メモは技術的意思決定の経緯を記録するためのものである。コードレビューや将来の設計判断の参考資料として機能する。

### 命名規則

```
prompts/memos/{トピック}.v{バージョン}.md
```

- トピック名はケバブケースで記述する
- バージョンは検討の改訂を示す（v1, v2, ...）

### ライフサイクル

| 状態 | 説明 | 対応 |
|------|------|------|
| 活用中 | 現在進行中の設計検討、または最近完了した意思決定 | そのまま維持 |
| 完了・反映済み | 意思決定が完了し、結果がコード・ドキュメントに反映済み | メモ冒頭にステータスを記載 |
| 陳腐化 | 対象の機能・コードが大幅に変更され、メモの内容が実態と乖離 | 削除を検討 |

### ステータス表記

完了したメモには冒頭に以下を記載する：

```markdown
> **ステータス**: 完了・反映済み（YYYY-MM-DD）
> **結果**: [簡潔な結論]
```

## 対象読者

ドキュメントには以下の読者を想定する。各文書はいずれかの読者を主対象とする。

| 読者 | 説明 | 主に参照する場所 |
|------|------|----------------|
| 利用者 | フレームワークを使ってプロンプトモジュールを構築する開発者 | README.md, docs/ |
| 貢献者 | フレームワーク自体の開発に関わる開発者 | AGENTS.md, docs/, prompts/ |
| AIアシスタント | コード作業を支援するAIエージェント | AGENTS.md, docs/ |

## ドキュメントのライフサイクル

### 作成

- 新機能の追加時にはdocs/の該当文書を更新する（または新規作成する）
- 設計検討時はprompts/memos/にメモを作成する
- 新パッケージ作成時はREADME.mdを作成する

### 更新

- コードの変更時は関連ドキュメントを同時に更新する（詳細は [ドキュメントとコードの同期管理](../prompts/document-code-sync.md) を参照）
- 品質管理は [ドキュメント校正ガイド](../prompts/DOCUMENT_PROOFREADING_GUIDE.md) に従う

### アーカイブ・削除

- 機能削除に伴い不要になった文書は削除する
- 設計メモは「完了・反映済み」としてステータスを付与し、陳腐化したら削除する
- 削除の判断に迷う場合はgit履歴に残るため、積極的に削除してよい

## インデックスの管理

### docs/README.md

docs/配下の全文書へのナビゲーションを提供する。docs/に文書を追加・削除した場合は必ずdocs/README.mdを更新する。

### prompts/README.md

prompts/配下の全文書へのナビゲーションを提供する。prompts/に文書を追加・削除した場合は必ずprompts/README.mdを更新する。

### ルートREADME.md

プロジェクトの概要とクイックスタートを提供する。docs/README.mdへの誘導を含む。

## 関連ドキュメント

- [ドキュメントとコードの同期管理](../prompts/document-code-sync.md) - コードとドキュメントの同期運用
- [ドキュメント校正ガイド](../prompts/DOCUMENT_PROOFREADING_GUIDE.md) - 校正の原則とチェックリスト
- [校正実行プロンプト](../prompts/PROOFREADING_EXECUTION_PROMPT.md) - 校正作業の実行手順
